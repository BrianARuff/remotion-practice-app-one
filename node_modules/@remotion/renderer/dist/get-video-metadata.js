"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getVideoMetadata = void 0;
const compositor_1 = require("./compositor/compositor");
const getVideoMetadata = async (videoSource, options) => {
    var _a;
    const compositor = (0, compositor_1.startLongRunningCompositor)({
        maximumFrameCacheItemsInBytes: null,
        logLevel: (_a = options === null || options === void 0 ? void 0 : options.logLevel) !== null && _a !== void 0 ? _a : 'info',
        indent: false,
    });
    const metadataResponse = await compositor.executeCommand('GetVideoMetadata', {
        src: videoSource,
    });
    compositor.finishCommands();
    await compositor.waitForDone();
    return JSON.parse(metadataResponse.toString('utf-8'));
};
exports.getVideoMetadata = getVideoMetadata;
