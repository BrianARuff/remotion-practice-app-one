import { Internals } from 'remotion';
import { z } from 'zod';

const REMOTION_COLOR_BRAND = '__remotion-color';
const parseColor = (value) => {
    const colored = Internals.processColor(value).toString(16).padStart(8, '0');
    const opacity = parseInt(colored.slice(0, 2), 16);
    const r = parseInt(colored.slice(2, 4), 16);
    const g = parseInt(colored.slice(4, 6), 16);
    const b = parseInt(colored.slice(6, 8), 16);
    return { a: opacity, r, g, b };
};
const zColor = () => z
    .string()
    .refine((value) => {
    try {
        parseColor(value);
        return true;
    }
    catch (err) {
        return false;
    }
}, { message: 'Invalid color' })
    .describe(REMOTION_COLOR_BRAND);

const REMOTION_TEXTAREA_BRAND = '__remotion-textarea';
const zTextarea = () => z.string().describe(REMOTION_TEXTAREA_BRAND);

const ZodZypesInternals = {
    parseColor,
    REMOTION_COLOR_BRAND,
    REMOTION_TEXTAREA_BRAND,
};

export { ZodZypesInternals, zColor, zTextarea };
