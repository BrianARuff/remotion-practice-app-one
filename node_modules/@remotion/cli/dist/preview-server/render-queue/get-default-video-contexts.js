"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDefaultCodecs = void 0;
const client_1 = require("@remotion/renderer/client");
const getDefaultCodecs = ({ defaultConfigurationVideoCodec, compositionDefaultVideoCodec, renderType, defaultConfigurationAudioCodec, }) => {
    var _a;
    const userPreferredVideoCodec = (_a = compositionDefaultVideoCodec !== null && compositionDefaultVideoCodec !== void 0 ? compositionDefaultVideoCodec : defaultConfigurationVideoCodec) !== null && _a !== void 0 ? _a : 'h264';
    const isVideoCodecAnAudioCodec = client_1.BrowserSafeApis.isAudioCodec(userPreferredVideoCodec);
    if (isVideoCodecAnAudioCodec) {
        return {
            initialAudioCodec: userPreferredVideoCodec,
            initialRenderType: 'audio',
            initialVideoCodec: userPreferredVideoCodec,
            initialVideoCodecForAudioTab: userPreferredVideoCodec,
            initialVideoCodecForVideoTab: client_1.BrowserSafeApis.isAudioCodec(defaultConfigurationVideoCodec)
                ? 'h264'
                : defaultConfigurationVideoCodec,
        };
    }
    const suitableAudioCodecForVideoCodec = client_1.BrowserSafeApis.defaultAudioCodecs[userPreferredVideoCodec].compressed;
    return {
        initialAudioCodec: defaultConfigurationAudioCodec !== null && defaultConfigurationAudioCodec !== void 0 ? defaultConfigurationAudioCodec : suitableAudioCodecForVideoCodec,
        initialVideoCodec: userPreferredVideoCodec,
        initialRenderType: renderType,
        initialVideoCodecForAudioTab: userPreferredVideoCodec,
        initialVideoCodecForVideoTab: userPreferredVideoCodec,
    };
};
exports.getDefaultCodecs = getDefaultCodecs;
