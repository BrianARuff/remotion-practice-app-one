"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ffprobeCommand = exports.ffmpegCommand = void 0;
const renderer_1 = require("@remotion/renderer");
const node_child_process_1 = require("node:child_process");
const node_fs_1 = require("node:fs");
const ffmpegCommand = (_root, args) => {
    const binary = renderer_1.RenderInternals.getExecutablePath('ffmpeg');
    if (!process.env.READ_ONLY_FS) {
        (0, node_fs_1.chmodSync)(binary, 0o755);
    }
    const done = (0, node_child_process_1.spawnSync)(binary, args, {
        ...renderer_1.RenderInternals.dynamicLibraryPathOptions(),
        stdio: 'inherit',
    });
    process.exit(done.status);
};
exports.ffmpegCommand = ffmpegCommand;
const ffprobeCommand = (_root, args) => {
    const binary = renderer_1.RenderInternals.getExecutablePath('ffprobe');
    if (!process.env.READ_ONLY_FS) {
        (0, node_fs_1.chmodSync)(binary, 0o755);
    }
    const done = (0, node_child_process_1.spawnSync)(binary, args, {
        ...renderer_1.RenderInternals.dynamicLibraryPathOptions(),
        stdio: 'inherit',
    });
    process.exit(done.status);
};
exports.ffprobeCommand = ffprobeCommand;
